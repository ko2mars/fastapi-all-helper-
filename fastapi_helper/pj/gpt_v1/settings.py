import logging

from pydantic import BaseModel
from .enums import AppColor


class AppSettings(BaseModel):
    title: str = "ü§ñ CHAT GPT APP"
    version: str = "1.0.0"
    description: str = """
    üì±–í–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ß–ê–¢ –ì–ü–¢ü§ñ
    –î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –∫–∞–∫ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    –û—Å–Ω–æ–≤—ã–µ —ç–¥–ø–æ–∏–Ω—Ç—ã:
       - /v1/ - –∫–æ—Ä–µ–Ω—å –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤–æ–∑—Ä–∞—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –≤–∞—à IP –∞–¥—Ä–µ—Å
         ‚îî –î–∞–Ω–Ω—ã–π —ç–¥–ø–æ–∏–Ω—Ç –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ –≤–æ–∑—Ä–∞—â–∞–µ—Ç –æ–Ω –≤–∞—à —Ç–µ–∫—É—â–∏–π IP –∞–¥—Ä–µ—Å
         ‚îî –ò–ª–∏ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π Ip –∞–¥—Ä–µ—Å –µ—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞ –Ω–∞ localhost
         

       - /v1/chat/create - –í —ç—Ç–æ–º —ç–¥–ø–æ–∏–Ω—Ç–µ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –º–æ–¥–µ–ª—å –∏—Å—Å–∫—É—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–µ–∫—Ç–∞ 
         ‚îî –¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–≤–æ–¥–∏—Ç—å –≤—Ä—É—á–Ω—É—é —Ç.–∫ —Ç–∞–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å –¥–ª—è –ø–µ—Ä–µ—á–µ—Å–ª–µ–Ω–∏–π
         ‚îî –≤—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –º–æ–¥–µ–ª—å, –∑–∞—Ç–µ–º –≤—ã –≤–≤–æ–¥–∏—Ç–µ –ø—Ä–æ–º–Ω—Ç –∏ –≥–æ—Ç–æ–≤–æ‚úÖ
         ‚îî –ø–æ—Å–æ–∫–ª—å–∫—É —ç—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–Ω–∏—è –æ–Ω–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
         
    –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—èü•∞
    """
    
    
    
log = logging.getLogger(__name__)


class LifespanHelper:
    def __init__(self) -> None:
        pass 
    
    async def start_app(self):
        """
        –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

        –ï—Å–ª–∏ –ª–æ–≥–≥–µ—Ä –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π StreamHandler 
        —Å —Ä–∞—Å–∫—Ä–∞—Å–∫–æ–π —á–µ—Ä–µ–∑ AppColor. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: 
        –≤—Ä–µ–º—è, —É—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏, –∏–º—è –ª–æ–≥–≥–µ—Ä–∞ –∏ —Å–∞–º–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

        Note:
            –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¶–≤–µ—Ç–æ–≤—É—é –∫–∞—Å—Ç–æ–º–Ω—É—é –ø–∞–ª–∏—Ç—Ä—É  –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, —á—Ç–æ–±—ã –ª–æ–≥–∏ –±—ã–ª–æ –ª–µ–≥—á–µ —á–∏—Ç–∞—Ç—å 
            –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
        """
        
        
        if not log.handlers:
            handler = logging.StreamHandler()
            formatter = logging.Formatter(
                f"{AppColor.BLUE.value}%(asctime)s | "
                f"{AppColor.RED.value}   %(levelname)-8s{AppColor.RESET.value}| "
                f" {AppColor.MAGENTA.value}%(name)s {AppColor.RESET.value}| {AppColor.YELLOW.value}%(message)s",
                datefmt="%Y-%m-%d %H:%M:%S"
            )
            handler.setFormatter(formatter)
            log.addHandler(handler)
            log.setLevel(logging.INFO)
        log.info("START APP")
        
    async def close_app(self):
        """
        –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

        –í—ã–≤–æ–¥–∏—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.
        """
        log.info("CLOSE APP")
        


app_settings = AppSettings()
lifespan_helper = LifespanHelper()